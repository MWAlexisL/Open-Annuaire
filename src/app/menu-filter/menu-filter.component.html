<!-- Activité (code APE) -->

<div class="yellow-line filter" fxFlex>
  <h6>Activité (code APE)</h6>
  <div fxLayout="row" *ngIf="filters.apet700.filtre">
    <i fxFlex="9" (click)="removeFilter('apet700')" class="material-icons">close</i>
    <h6 fxFlex>{{filters.apet700.data}}</h6>
    <div><span class="badge badge-yellow">{{filters.apet700.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.apet700 === undefined">
    <input #apeCodeInput (keyup.enter)="addFilter('apet700', apeCodeInput.value); apeCodeInput.value = ''"
           matInput name="apeCodeFilter" type="text" placeholder="Ajouter une activité"/>
  </mat-form-field>
</div>


<!-- Catégorie d'entreprise -->


<div class="green-line filter" fxFlex>
  <h6>Catégorie d'entreprise</h6>
  <div fxLayout="row" *ngIf="filters.categorie.filtre">
    <i fxFlex="9" (click)="removeFilter('categorie')" class="material-icons">close</i>
    <h6 fxFlex>{{findEffectif('categorie',filters.categorie.data)}}</h6>
    <div><span class="badge badge-green">{{filters.categorie.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.categorie.filtre === undefined">
    <mat-select #categInput placeholder="Ajouter une catégorie d'entreprise"
                (valueChange)="addFilter('categorie', categInput.value); categInput.value = ''">
      <mat-option *ngFor="let choice of categories" [value]=choice.value>{{choice.libelle}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<!-- Département -->


<div class="light-blue-line filter" fxFlex>
  <div fxLayout="row">
    <h6 fxFlex fxFlexAlign="center">Département</h6>
    <button mat-icon-button color="accent" (click)="filters.depet.visible = !filters.depet.visible">
      <mat-icon class="mat-icon">{{filters.depet.visible ? 'remove' : 'add'}}</mat-icon>
    </button>
  </div>
  <div *ngIf="filters.depet.filtre">
    <div fxLayout="row" *ngFor="let depet of filters.depet.filter; let i of index">
      <button mat-icon-button fxFlex="9" (click)="removeFilter('depet', i)"><mat-icon>close</mat-icon></button>
      <h6 fxFlex>{{depet.data}}</h6>
      <div><span class="badge badge-blue">{{depet.nhits | number:'':'fr'}}</span></div>
    </div>
  </div>
  <mat-form-field *ngIf="filters.depet.visible">
    <input #departmentInput
           (keyup.enter)="addFilter('depet',departmentInput.value); departmentInput.value = ''" matInput
           name="departmentFilter" type="text" placeholder="Ajouter un département"/>
  </mat-form-field>
</div>


<!-- Commune -->


<div class="dark-blue-line filter" fxFlex>
  <h6>Comunne (Code postal)</h6>
  <div fxLayout="row" *ngIf="filters.codpos.filtre">
    <i fxFlex="9" (click)="removeFilter('codpos')" class="material-icons">close</i>
    <h6 fxFlex>{{filters.codpos.data}}</h6>
    <div><span class="badge badge-dark-blue">{{filters.codpos.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.codpos === undefined">
    <input #postalCodeInput
           (keyup.enter)="addFilter('codpos', postalCodeInput.value); postalCodeInput.value = ''" matInput
           name="postalCodeIFilter" type="text" placeholder="Ajouter une commune"/>
  </mat-form-field>
</div>


<!-- Date de création -->


<div class="dark-purple-line filter" fxFlex>
  <h6>Date de création</h6>
  <div fxLayout="row" *ngIf="filters.dcren.filtre">
    <i fxFlex="9" (click)="removeFilter('dcren')" class="material-icons">close</i>
    <h6 fxFlex>{{filters.dcren.dateBefore ? "Avant" : "Après" }} le {{filters.dcren.data}}</h6>
    <div><span class="badge badge-dark-purple">{{filters.dcren.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.dcren === undefined">
    <mat-select #beforeAfterSelect placeholder="Avant/Après">
      <mat-option [value]=true>Avant le</mat-option>
      <mat-option [value]=false>Après le</mat-option>
    </mat-select>
    <input #dcrenInput matInput
           (dateInput)="addFilter('dcren', dcrenInput.value, beforeAfterSelect.value); dcrenInput.value = ''"
           [matDatepicker]="picker" disabled placeholder="Ajouter une année de création">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker [disabled]="!beforeAfterSelect.value"></mat-datepicker>
  </mat-form-field>
</div>

<!-- Status juridique -->


<div class="light-purple-line filter" fxFlex>
  <h6>Status juridique</h6>
  <div fxLayout="row" *ngIf="filters.sigle.filtre">
    <i fxFlex="9" (click)="removeFilter('sigle')" class="material-icons">close</i>
    <h6 fxFlex>{{filters.sigle.data}}</h6>
    <div><span class="badge badge-purple">{{filters.sigle.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.sigle === undefined">
    <input #legalFormInput (keyup.enter)="addFilter('sigle', legalFormInput.value); legalFormInput.value = ''"
           matInput name="legalFormFilter" type="text" placeholder="Ajouter un statut juridique"/>
  </mat-form-field>
</div>


<!-- Effectif -->


<div class="pink-line filter" fxFlex>
  <h6>Effectifs</h6>
  <div fxLayout="row" *ngIf="filters.tefet.filtre">
    <i fxFlex="9" (click)="removeFilter('tefet')" class="material-icons">close</i>
    <h6 fxFlex>{{findEffectif('effectif', filters.tefet.data)}}</h6>
    <div><span class="badge badge-pink">{{filters.tefet.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.tefet === undefined">
    <mat-select #tefetInput placeholder="Ajouter une tranche d'effectif"
                (valueChange)="addFilter('tefet', tefetInput.value); tefetInput.value = ''">
      <mat-option *ngFor="let choice of effectifs" [value]=choice.value>{{choice.libelle}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>


<!-- CHIFFRE D'AFFAIRES -->


<div class="red-line filter" fxFlex>
  <h6>Chiffre d'affaires</h6>
  <div fxLayout="row" *ngIf="filters.tca.filtre">
    <i fxFlex="9" (click)="removeFilter('tca')" class="material-icons">close</i>
    <h6 fxFlex>{{revenues[filters.tca.data]}}</h6>
    <div><span class="badge badge-dark-purple">{{filters.tca.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.tca === undefined">
    <mat-select #tcaInput placeholder="Ajouter une tranche de chiffre d'affaires"
                (valueChange)="addFilter('tca', tcaInput.value); tcaInput.value = ''">
      <mat-option *ngFor="let choice of revenues; let i = index" [value]=i>{{choice}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>


<!-- Région -->


<div class="orange-line filter" fxFlex>
  <h6>Région</h6>
  <div fxLayout="row" *ngIf="filters.libreg_new.filtre">
    <i fxFlex="9" (click)="removeFilter('libreg_new')" class="material-icons">close</i>
    <h6 fxFlex>{{filters.libreg_new.data}}</h6>
    <div><span class="badge badge-orange">{{filters.libreg_new.nhits | number:'':'fr'}}</span></div>
  </div>
  <mat-form-field *ngIf="filters.libreg_new === undefined">
    <input #libregInput (keyup.enter)="addFilter('libreg_new', libregInput.value); libregInput.value = ''"
           matInput name="legalFormFilter" type="text" placeholder="Ajouter une région"/>
  </mat-form-field>
</div>

